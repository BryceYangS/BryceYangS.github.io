------------------------
**복습**


```
> ipconfig /flushdns
> ipconfig /registerdns
```


--------------------------


# 오늘 배울 내용
# VLAN과 Trunking
### VLAN의 필요성
### VLAN 설정
### VLAN 라우팅
### Trunking 의미
### Trunking 포트와 Access 포트
### 801.Q 구조와 동작 원리
### VTP 동작과 설정
### STP의 동작과 이해
------------



## SWITCH의 기본 작동원리
Layer 2 장비
Bridge와 비슷 : Bridge는 포트가 2,3개. S/W적으로 처리
Switch
 - 24, 48, 100포트 등의 많은 포트
 - 속도 빠름.
 - 포트마다 밴드위드 조정 가능(10Mbps, 100M , 100G.. 등)
 - 3가지 기능
	- Address Learning : Address 학습을 위해 처음에는 flooding 해서 Mac 주소 Gathering
	- Broadcast/Multicast Flooding : 모든 포트로. (Broadcast,Multicast 프레임 : Flooding)
	- Forward/Filter Decision : 해당 맥 주소로만 (Unicast 프레임 : Foward)
	- Loop Avoidance : 스위치 이중화 시키는 경우 있음. --> 이때 스위치 끼리 Looping이 발생할 수 있음. `STP` 알고리즘이 막아줌.

@ STP
 - Switch 이중화 경우 : Looping 방지 위한 하나의 protocol, algorithm

## VLAN
하나의 스위치에서 각각 다른 Broadcast domain 나눌 수 있음  
하나의 라우터 인터페이스에서 Broadcast domain을 분리 시킬 수 있음.  
VLAN ID : 1 ~ 1000개 까지의 Broadcast domain을 만들 수 있음  
Switch의 포트에 고유 식별자를 넣어서 같은 식별자끼리만 통신하도록 만듦  
1개의 스위치가 마치 3개의 스위치처럼 동작 가능

VLAN 작동법
 - 각각의 Logical VLAN은 분리된 서브넷과 같음
 - VLAN은 여러 개의 스위치를 거쳐 구성 가능
 - Trunk는 다수(전부일 수도 있음)의 VLAN Traffic을 전달
 - Trunk는 서로 다른 VLAN을 구별하기 위해 특별한 Encapsulation(ISL or 802.1q)을 사용
	- ISL (Inter-Switch Link) : cisco 장비에서만 사용.
	- 802.1q : 표준
 - Trunked Link는 1 - 1005개의 VLAN을 연결할 수 있다
 - 제약사항 : Trunk Port는 Fast Ethernet (100Mbps) 이상 Port에서만 가능  

802.1Q Trunking
 - Switch 사이에 Trunk 설정의 표준
 - VLAN 트래픽을 전달하는 방법
 - Tagging 메커니즘 사용 
	- 스위치에서 들어오는 패킷의 헤더에 VALN 태그 값을 추가
 - Not Tagged Frame들을 위한 Native VLAN을 정의 --> 1번 VLAN (default VLAN)
	- 태그가 붙지 않은 VLAN은 전부 default VLAN으로 데이터를 보냄  

![tagged-frame](/assets/img/tagged frame.png)

@ Trunk
 - VLAN 트래픽 전달하는 포트
 - 스위치와 스위치 연결위해서는 각 스위치에 Trunk port를 설정해야 함

@ Access Port vs Trunk Port
 - Trunk : 모든 VLAN에 넘겨 줄 수 있음. VLAN에서 발생하는 모든 데이터를 다른 스위치에 넘겨줄 때
 - Access : 특정 VLAN. Trunk Port 제외 그 외 포트.
